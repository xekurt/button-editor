<section class="p-4 sm:p-6">
  <div class="grid grid-cols-1 gap-8 md:grid-cols-3">
    <ng-container *ngFor="let variant of variants; let i = index">
      <div class="flex flex-col items-center justify-start p-0">
        <!-- Dropdown header -->
        <button
          (click)="toggleDropdown(i)"
          class="flex w-full cursor-pointer items-center justify-between rounded-t-2xl bg-neutral-50 px-6 py-4 shadow-lg shadow-neutral-200 dark:bg-neutral-800 dark:shadow-neutral-900"
          [attr.aria-expanded]="openDropdowns[i]"
          [attr.aria-controls]="'variant-panel-' + i"
          id="variant-header-{{ i }}"
          type="button"
        >
          <span
            class="inline-block rounded bg-neutral-200 px-4 py-2 text-lg font-bold tracking-wide text-neutral-800 dark:bg-neutral-700 dark:text-neutral-100"
          >
            {{ variant.charAt(0).toUpperCase() + variant.slice(1) }}
            Variant
          </span>
          <svg
            [ngClass]="{
              'rotate-180': openDropdowns[i],
            }"
            class="ml-2 h-5 w-5 transition-transform duration-200"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
            aria-hidden="true"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div
          *ngIf="openDropdowns[i]"
          class="w-full rounded-b-2xl bg-neutral-50 px-6 pt-2 pb-6 shadow-lg shadow-neutral-200 dark:bg-neutral-800 dark:shadow-neutral-900"
          role="region"
          [attr.aria-labelledby]="'variant-header-' + i"
          [id]="'variant-panel-' + i"
        >
          <div class="grid w-full grid-cols-1 gap-6">
            <ng-container *ngFor="let state of states; let j = index">
              <div class="flex flex-col items-start">
                <!-- Show status label above button on mobile only -->
                <span class="mb-2 block text-center text-base font-semibold md:hidden">{{
                  statuses[j]
                }}</span>
                <app-custom-button [variant]="variant" [state]="state">
                  {{ variant.charAt(0).toUpperCase() + variant.slice(1)
                  }}<ng-container *ngIf="state !== 'default'">
                    -
                    {{ state.charAt(0).toUpperCase() + state.slice(1) }}</ng-container
                  >
                </app-custom-button>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</section>
